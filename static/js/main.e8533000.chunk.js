(this.webpackJsonpkinopoisk=this.webpackJsonpkinopoisk||[]).push([[0],{11:function(e,t,n){},13:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),s=n(4),i=n.n(s),o=(n(11),n(2)),r=n(5),l=n(6),u=new(function(){function e(t){var n=t.baseUrl,c=t.authorization;Object(r.a)(this,e),this._baseUrl=n,this._token=c}return Object(l.a)(e,[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430 ".concat(e.status))}},{key:"searchFilmsByName",value:function(e){return fetch("".concat(this._baseUrl,"?apikey=").concat(this._token,"&s=").concat(e)).then(this._checkResponse)}},{key:"getFilmByID",value:function(e){return fetch("".concat(this._baseUrl,"?apikey=").concat(this._token,"&i=").concat(e)).then(this._checkResponse)}}]),e}())({baseUrl:"https://www.omdbapi.com/",authorization:"333826fc"}),h=n(0);var j=function(){var e=(new Date).getFullYear();return Object(h.jsx)("footer",{className:"footer",children:Object(h.jsxs)("p",{className:"footer__copyright",children:["\xa9",e," ",Object(h.jsx)("span",{children:"Maxim Grivennyy"})," with ",Object(h.jsx)("a",{className:"footer__link",href:"http://www.omdbapi.com/",children:"OMDb API"})]})})};var p=function(){return Object(h.jsx)("header",{className:"header",children:Object(h.jsx)("a",{href:"http://maximka76667.github.io/kinopoisk",className:"header__heading",children:"KinoPoisk"})})};var m=function(e){var t=e.film;return Object(h.jsxs)("article",{className:"film",onClick:function(){return e.onCardClick(t)},children:[Object(h.jsx)("div",{className:"film__poster-wrapper ".concat(e.isLoading?"film__poster-wrapper_loading":""),children:Object(h.jsx)("img",{className:"film__poster",src:t.Poster,alt:t.Title})}),Object(h.jsx)("div",{className:"film__heading",children:Object(h.jsxs)("h3",{className:"film__title",children:[t.Title," (",t.Year,")"]})})]})};var b=function(e){return Object(h.jsxs)("main",{className:"content",children:[Object(h.jsxs)("h1",{className:"content__heading",children:["Enter the name of the movie and press the ",Object(h.jsx)("span",{children:"search"})," button"]}),Object(h.jsxs)("form",{className:"form",onSubmit:e.onSearch,children:[Object(h.jsx)("input",{className:"form__input",id:"title",value:e.title,placeholder:"Name of the movie",onChange:e.onChange,required:!0}),Object(h.jsx)("button",{className:"form__submit-button",type:"submit",children:e.isSearching?"Searching...":"Click"})]}),e.isSearching&&Object(h.jsx)("div",{className:"films__loading",children:"Searching..."}),Object(h.jsx)("div",{className:"films",children:e.films.map((function(t){return Object(h.jsx)(m,{film:t,onCardClick:e.onCardClick,isLoading:e.isLoading},t.imdbID)}))})]})};var d=function(e){var t=e.isPopupOpen,n=e.closePopup,c=e.filmDetails;return Object(h.jsxs)("div",{className:"popup ".concat(t?"popup_opened":""),children:[Object(h.jsx)("div",{className:"popup__overlay",onClick:n}),Object(h.jsxs)("div",{className:"popup__container",children:[Object(h.jsx)("img",{className:"popup__poster",src:c.Poster,alt:c.Title}),Object(h.jsxs)("div",{className:"popup__info",children:[Object(h.jsx)("h2",{className:"popup__title",children:c.Title}),Object(h.jsx)("p",{className:"popup__plot",children:c.Plot}),Object(h.jsxs)("p",{className:"popup__year",children:["Release Date: ",c.Year]}),Object(h.jsxs)("p",{className:"popup__runtime",children:["Runtime: ",c.Runtime]})]}),Object(h.jsx)("button",{className:"popup__close-button",onClick:n})]})]})};var f=function(){var e=a.a.useState(""),t=Object(o.a)(e,2),n=t[0],c=t[1],s=a.a.useState([]),i=Object(o.a)(s,2),r=i[0],l=i[1],m=a.a.useState(""),f=Object(o.a)(m,2),_=f[0],O=f[1],x=a.a.useState({}),g=Object(o.a)(x,2),v=g[0],k=g[1],N=a.a.useState({}),S=Object(o.a)(N,2),y=S[0],C=S[1],w=a.a.useState(!1),D=Object(o.a)(w,2),P=D[0],I=D[1],F=a.a.useState(!1),B=Object(o.a)(F,2),L=B[0],R=B[1],T=a.a.useState(!1),U=Object(o.a)(T,2),M=U[0],Y=U[1];return Object(h.jsxs)("div",{className:"page",children:[Object(h.jsx)(p,{}),Object(h.jsx)(b,{films:r,onSearch:function(e){e.preventDefault(),R(!0),u.searchFilmsByName(n).then((function(e){l(e.Search),console.log(e.Search)})).catch((function(e){return console.log(e)})).finally((function(){return R(!1)}))},onCardClick:function(e){Y(!0),e.imdbID!==_?(O(e.imdbID),k(e),u.getFilmByID(e.imdbID).then((function(e){C(e),I(!0)})).catch((function(e){return console.log(e)})).finally((function(){return Y(!1)}))):I(!0)},onChange:function(e){c(e.target.value)},isSearching:L,isLoading:M}),Object(h.jsx)(d,{isPopupOpen:P,closePopup:function(){I(!1),Y(!1)},filmInfo:v,filmDetails:y}),Object(h.jsx)(j,{})]})},_=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,14)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),s(e),i(e)}))};i.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(f,{})}),document.getElementById("root")),_()}},[[13,1,2]]]);
//# sourceMappingURL=main.e8533000.chunk.js.map